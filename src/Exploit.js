import React from 'react'
import Jotted from 'jotted'
import Radium from 'radium'

const loadJottedOnNode = function (code, node) {
  new Jotted(node, { // eslint-disable-line no-new
    files: [{
      type: 'js',
      content: code
    }]
  })
}

// const styles = {
  // one: {
  //   color: 'red'
  // },
  // two: {
  //   backgroundColor: 'blue'
  // }
// }

const style = {
  scopeSelector: '.jotted',
  rules: {
    display: 'flex',
    '.jotted-nav, .jotted-pane-css, .jotted-pane-html': {
      display: 'none'
    },
    '.jotted-pane-result': {
      order: 2
    },
    '.jotted-pane-js': {
      order: 1
    },
    '.jotted-pane-js textarea, .jotted-pane-result iframe': {
      'min-width': 400
    }
  }
}

class Exploit extends React.Component {
  constructor (props) {
    super(props)
    this.loadJottedOnNode = loadJottedOnNode.bind(this, this.props.code)
  }
  render () {
    return (
      <div>
        <Radium.Style {...style} />
        <p>{this.props.explanation}</p>
        <div
          ref={this.loadJottedOnNode}
          // style={[
          //   styles.one,
          //   styles.two
          // ]}
        />
      </div>
    )
  }
}
Exploit.propTypes = {
  code: React.PropTypes.string.isRequired,
  explanation: React.PropTypes.string
}

module.exports = Radium(Exploit)
